{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Welcome to PageSpeed Insights MCP!!!!","text":"<p>PageSpeed Insights MCP is a Model Context Protocol (MCP) server that enables Large Language Models (LLMs) like Claude to directly interact with the Google PageSpeed Insights API. This allows you to analyze web performance, get detailed reports, and receive smart recommendations directly within your chat interface.</p>"},{"location":"#key-features","title":"\ud83d\ude80 Key Features","text":"<ul> <li>Comprehensive Analysis: Run full Google PageSpeed Insights analysis including Lighthouse metrics.</li> <li>Multi-Platform: Support for both Mobile and Desktop analysis strategies.</li> <li>Core Web Vitals: detailed reporting on LCP, CLS, and INP.</li> <li>Smart Recommendations: Get prioritized, actionable advice to improve your site's performance.</li> <li>Visual Analysis: Retrieve screenshots and visual loading timelines.</li> <li>Deep Dives: Analyze specific aspects like Network requests, JavaScript execution, and Third-party scripts.</li> <li>Comparison: Compare performance metrics between two different URLs.</li> </ul>"},{"location":"#documentation-overview","title":"\ud83d\udcda Documentation Overview","text":"<ul> <li>Getting Started: Learn how to install, configure, and connect the server to Claude Desktop.</li> <li>Features: Explore the capabilities of the application in detail.</li> <li>Tools Reference: A complete reference of all available tools and their parameters.</li> <li>Concepts: Understand the Model Context Protocol (MCP) and how this server fits into the ecosystem.</li> <li>Developers: Architectural overview and contribution guidelines for open-source contributors.</li> </ul>"},{"location":"#open-source","title":"\ud83e\udd1d Open Source","text":"<p>This project is open source and available on GitHub. Contributions are welcome!</p>"},{"location":"getting-started/","title":"Getting Started","text":"<p>This guide will help you set up the PageSpeed Insights MCP server and connect it to your MCP client (like Claude Desktop).</p>"},{"location":"getting-started/#prerequisites","title":"Prerequisites","text":"<p>Before you begin, ensure you have the following:</p> <ol> <li>Node.js: Version 18 or higher.</li> <li>Google API Key: Required to access the PageSpeed Insights API.</li> </ol>"},{"location":"getting-started/#obtaining-a-google-api-key","title":"Obtaining a Google API Key","text":"<ol> <li>Go to the Google Cloud Console.</li> <li>Create a new project or select an existing one.</li> <li>Navigate to APIs &amp; Services &gt; Library.</li> <li>Search for \"PageSpeed Insights API\" and enable it.</li> <li>Go to APIs &amp; Services &gt; Credentials.</li> <li>Click Create Credentials &gt; API Key.</li> <li>Copy the generated key.</li> </ol>"},{"location":"getting-started/#installation","title":"Installation","text":"<p>You can run the server using <code>npx</code> (recommended), install it globally via <code>npm</code>, or use Docker.</p>"},{"location":"getting-started/#option-1-using-npx-recommended","title":"Option 1: Using <code>npx</code> (Recommended)","text":"<p>You can run the server directly without installation:</p> <pre><code>export GOOGLE_API_KEY=your-google-api-key\nnpx pagespeed-insights-mcp\n</code></pre>"},{"location":"getting-started/#option-2-global-installation","title":"Option 2: Global Installation","text":"<p>Install the package globally using npm:</p> <pre><code>npm install -g pagespeed-insights-mcp\n</code></pre> <p>Then run it:</p> <pre><code>export GOOGLE_API_KEY=your-google-api-key\npagespeed-insights-mcp\n</code></pre>"},{"location":"getting-started/#option-3-docker","title":"Option 3: Docker","text":"<p>Build and run the container:</p> <pre><code>docker build -t pagespeed-insights-mcp .\ndocker run -e GOOGLE_API_KEY=your-key pagespeed-insights-mcp\n</code></pre>"},{"location":"getting-started/#configuration","title":"Configuration","text":"<p>The server requires the <code>GOOGLE_API_KEY</code> environment variable.</p> Variable Description Required Default <code>GOOGLE_API_KEY</code> Your Google PageSpeed Insights API Key Yes - <code>LOG_LEVEL</code> Logging level (trace, debug, info, warn, error) No <code>info</code> <code>MAX_CONCURRENCY</code> Max concurrent requests No <code>3</code> <code>REQUEST_TIMEOUT</code> Request timeout in ms No <code>30000</code> <code>CACHE_TTL</code> Cache time-to-live in seconds No <code>3600</code>"},{"location":"getting-started/#connecting-to-claude-desktop","title":"Connecting to Claude Desktop","text":"<p>To use this server with Claude Desktop, you need to configure the <code>claude_desktop_config.json</code> file.</p> <p>File Location:</p> <ul> <li>macOS: <code>~/Library/Application Support/Claude/claude_desktop_config.json</code></li> <li>Windows: <code>%APPDATA%\\Claude\\claude_desktop_config.json</code></li> <li>Linux: <code>~/.config/claude/claude_desktop_config.json</code></li> </ul> <p>Configuration:</p> <p>Add the following to your configuration file:</p> <pre><code>{\n  \"mcpServers\": {\n    \"pagespeed-insights\": {\n      \"command\": \"npx\",\n      \"args\": [\n        \"-y\",\n        \"pagespeed-insights-mcp\"\n      ],\n      \"env\": {\n        \"GOOGLE_API_KEY\": \"your-google-api-key-here\"\n      }\n    }\n  }\n}\n</code></pre> <p>Windows Users</p> <p>If you are on Windows, make sure to use the full path to the executable if <code>npx</code> is not in your PATH, or use the Docker method.</p> <p>After updating the configuration, restart Claude Desktop. You should now see the PageSpeed tools available in the interface.</p>"},{"location":"getting-started/#usage-examples","title":"Usage Examples","text":"<p>Once connected, you will see a list of available tools in your MCP client.</p> <p></p> <p>You can ask Claude to analyze a website, and it will use these tools to provide a comprehensive report.</p> <p></p>"},{"location":"concepts/mcp/","title":"What is MCP?","text":"<p>The Model Context Protocol (MCP) is an open standard that enables AI models to securely interact with local and remote resources. It provides a universal way to connect Large Language Models (LLMs) like Claude to data sources, tools, and prompts.</p>"},{"location":"concepts/mcp/#the-problem","title":"The Problem","text":"<p>Previously, connecting an AI assistant to a new tool or dataset required building a custom integration for that specific AI application. If you wanted to use the same tool with a different AI, you had to rebuild the integration. This led to fragmented ecosystems and duplicated effort.</p>"},{"location":"concepts/mcp/#the-mcp-solution","title":"The MCP Solution","text":"<p>MCP solves this by defining a standard protocol for:</p> <ol> <li>Exposing Resources: Letting the AI read data (files, database rows, API responses).</li> <li>Providing Tools: Letting the AI perform actions (run code, query APIs, update records).</li> <li>Defining Prompts: Providing reusable templates for common tasks.</li> </ol>"},{"location":"concepts/mcp/#architecture","title":"Architecture","text":"<p>MCP follows a client-server architecture:</p> <ul> <li>MCP Host: The application where the AI lives (e.g., Claude Desktop, an IDE, or a custom AI app).</li> <li>MCP Client: The component within the Host that speaks the protocol.</li> <li>MCP Server: A standalone service that exposes specific capabilities (like this PageSpeed Insights server).</li> </ul> <pre><code>graph LR\n    A[AI Model] &lt;--&gt; B[MCP Host / Client]\n    B &lt;--&gt; C[MCP Server 1]\n    B &lt;--&gt; D[MCP Server 2]\n    C &lt;--&gt; E[Data/API]\n    D &lt;--&gt; F[Local Files]\n</code></pre>"},{"location":"concepts/mcp/#how-this-project-fits-in","title":"How This Project Fits In","text":"<p>PageSpeed Insights MCP is an MCP Server.</p> <ul> <li>It connects to the Google PageSpeed Insights API.</li> <li>It translates the API's complex JSON responses into Tools that the AI can understand and use.</li> <li>It runs locally on your machine (or in a container) and communicates with your AI assistant (like Claude) via standard input/output (stdio).</li> </ul> <p>When you ask Claude to \"Analyze example.com\", Claude doesn't know how to talk to Google's API directly. Instead, it sends a request to this MCP server via the protocol. The server handles the API call, processes the data, and returns a structured result that Claude can interpret and explain to you.</p>"},{"location":"developers/architecture/","title":"Architecture Overview","text":"<p>This document provides a high-level overview of the PageSpeed Insights MCP Server codebase. It is intended for developers who wish to contribute to the project or understand its internal workings.</p>"},{"location":"developers/architecture/#project-structure","title":"Project Structure","text":"<p>The project is built with TypeScript and runs on Node.js. It uses the official <code>@modelcontextprotocol/sdk</code> to implement the MCP server.</p> <pre><code>src/\n\u251c\u2500\u2500 index.ts              # Entry point and Server definition\n\u251c\u2500\u2500 pagespeed-client.ts   # Google API interaction layer\n\u251c\u2500\u2500 response-parser.ts    # Data transformation logic\n\u251c\u2500\u2500 recommendations.ts    # Recommendation engine\n\u251c\u2500\u2500 cache.ts              # Caching implementation\n\u251c\u2500\u2500 logger.ts             # Logging utility\n\u251c\u2500\u2500 env.ts                # Environment variable validation\n\u251c\u2500\u2500 schemas.ts            # Zod schemas for input validation\n\u2514\u2500\u2500 types.ts              # TypeScript interfaces\n</code></pre>"},{"location":"developers/architecture/#key-components","title":"Key Components","text":""},{"location":"developers/architecture/#1-server-entry-point-indexts","title":"1. Server Entry Point (<code>index.ts</code>)","text":"<p>This is the core of the application. It: *   Initializes the MCP <code>Server</code> instance. *   Defines the capabilities (tools) exposed to the client. *   Maps tool execution requests to specific handler functions. *   Handles the main request/response loop via <code>StdioServerTransport</code>.</p>"},{"location":"developers/architecture/#2-pagespeed-client-pagespeed-clientts","title":"2. PageSpeed Client (<code>pagespeed-client.ts</code>)","text":"<p>This class is responsible for communicating with the external Google PageSpeed Insights API. *   Constructs the API URL with appropriate parameters (strategy, locale, categories). *   Handles authentication using the <code>GOOGLE_API_KEY</code>. *   Manages network retries and error handling. *   Integrates with the caching layer to avoid redundant requests.</p>"},{"location":"developers/architecture/#3-response-parser-response-parserts","title":"3. Response Parser (<code>response-parser.ts</code>)","text":"<p>The raw JSON response from Google is massive and complex. This component: *   Extracts key metrics (LCP, CLS, TBT, etc.). *   Simplifies the audit results. *   Formats the data into cleaner structures for the AI to consume.</p>"},{"location":"developers/architecture/#4-recommendation-engine-recommendationsts","title":"4. Recommendation Engine (<code>recommendations.ts</code>)","text":"<p>This component adds value on top of the raw data. It: *   Analyzes the audit results. *   Assigns priority scores to issues based on their impact. *   Generates human-readable advice and \"Next Steps\".</p>"},{"location":"developers/architecture/#5-caching-cachets","title":"5. Caching (<code>cache.ts</code>)","text":"<p>To improve performance and reduce API quota usage, the server implements an in-memory cache. *   Keys are generated based on URL, strategy, and locale. *   Results are cached for a configurable TTL (default 1 hour).</p>"},{"location":"developers/architecture/#data-flow","title":"Data Flow","text":"<ol> <li>Request: The MCP Client (e.g., Claude) sends a <code>call_tool</code> request (e.g., <code>analyze_page_speed</code>).</li> <li>Validation: <code>index.ts</code> validates the arguments using Zod schemas defined in <code>schemas.ts</code>.</li> <li>Check Cache: The <code>PageSpeedClient</code> checks if a valid result exists in the cache.</li> <li>API Call: If not cached, <code>PageSpeedClient</code> fetches data from Google PageSpeed Insights API.</li> <li>Processing: The raw response is passed to <code>ResponseParser</code> or <code>PerformanceRecommendationsEngine</code>.</li> <li>Response: The processed data is returned to the MCP Client as a text content block.</li> </ol>"},{"location":"developers/architecture/#technologies-used","title":"Technologies Used","text":"<ul> <li>TypeScript: For type safety and developer experience.</li> <li>@modelcontextprotocol/sdk: The official MCP implementation.</li> <li>Zod: For runtime schema validation.</li> <li>Node-fetch: For making HTTP requests.</li> <li>Pino: For structured logging.</li> </ul>"},{"location":"developers/contributing/","title":"Contributing Guide","text":"<p>Thank you for your interest in contributing to the PageSpeed Insights MCP Server! We welcome contributions from the community.</p>"},{"location":"developers/contributing/#development-setup","title":"Development Setup","text":"<ol> <li> <p>Clone the repository:     <pre><code>git clone https://github.com/ruslanlap/pagespeed-insights-mcp.git\ncd pagespeed-insights-mcp\n</code></pre></p> </li> <li> <p>Install dependencies:     <pre><code>npm install\n</code></pre></p> </li> <li> <p>Configure Environment:     Create a <code>.env</code> file or export the required variables:     <pre><code>export GOOGLE_API_KEY=your_test_key\n</code></pre></p> </li> </ol>"},{"location":"developers/contributing/#development-workflow","title":"Development Workflow","text":""},{"location":"developers/contributing/#running-locally","title":"Running Locally","text":"<p>To run the server in development mode with hot-reloading:</p> <pre><code>npm run dev\n</code></pre> <p>This uses <code>tsx</code> to run the TypeScript code directly.</p>"},{"location":"developers/contributing/#building","title":"Building","text":"<p>To build the project for production:</p> <pre><code>npm run build\n</code></pre> <p>This compiles the TypeScript code to JavaScript in the <code>dist/</code> directory.</p>"},{"location":"developers/contributing/#testing","title":"Testing","text":"<p>We use Vitest for testing.</p> <ul> <li> <p>Run all tests:     <pre><code>npm test\n</code></pre></p> </li> <li> <p>Run tests with coverage:     <pre><code>npm run test:coverage\n</code></pre></p> </li> </ul> <p>Please ensure that any new features or bug fixes are accompanied by appropriate tests.</p>"},{"location":"developers/contributing/#code-style","title":"Code Style","text":"<p>We use ESLint and Prettier to maintain code quality.</p> <ul> <li> <p>Lint code:     <pre><code>npm run lint\n</code></pre></p> </li> <li> <p>Fix linting issues:     <pre><code>npm run lint:fix\n</code></pre></p> </li> <li> <p>Format code:     <pre><code>npm run format\n</code></pre></p> </li> </ul>"},{"location":"developers/contributing/#submitting-a-pull-request","title":"Submitting a Pull Request","text":"<ol> <li>Fork the repository.</li> <li>Create a new branch for your feature or fix: <code>git checkout -b feature/amazing-feature</code>.</li> <li>Commit your changes with clear messages.</li> <li>Push to your fork.</li> <li>Open a Pull Request against the <code>master</code> branch.</li> </ol>"},{"location":"developers/contributing/#release-process","title":"Release Process","text":"<p>This project uses Semantic Release to automate versioning and publishing. Ensure your commit messages follow the Conventional Commits specification (e.g., <code>feat: add new tool</code>, <code>fix: handle api error</code>).</p>"},{"location":"features/","title":"Features Overview","text":"<p>The PageSpeed Insights MCP server provides a suite of tools designed to help you understand and improve your website's performance.</p>"},{"location":"features/#performance-analysis","title":"\ud83d\udcca Performance Analysis","text":"<p>At its core, the server allows you to run comprehensive performance audits using Google's Lighthouse technology.</p> <ul> <li>Full Reports: Get detailed breakdowns of Performance, Accessibility, Best Practices, SEO, and PWA scores.</li> <li>Core Web Vitals: Monitor real-world user experience metrics like LCP (Largest Contentful Paint), FID (First Input Delay), and CLS (Cumulative Layout Shift).</li> <li>Device Strategies: Analyze your site as it appears on both Mobile and Desktop devices to ensure a responsive experience.</li> </ul>"},{"location":"features/#advanced-diagnostics","title":"\ud83d\udd0d Advanced Diagnostics","text":"<p>Go beyond the score with detailed diagnostic tools:</p> <ul> <li>Visual Analysis: See exactly what your users see with filmstrips and screenshots of the loading process.</li> <li>Network Waterfall: Visualize the loading sequence of resources to identify bottlenecks.</li> <li>JavaScript Profiling: Understand how script execution impacts your main thread and interactivity.</li> <li>Element Inspection: Identify specific DOM elements that are causing layout shifts or slow paints.</li> <li>Image Optimization: Find images that are too large, unoptimized, or causing layout shifts.</li> </ul>"},{"location":"features/#comparison-benchmarking","title":"\u2696\ufe0f Comparison &amp; Benchmarking","text":"<ul> <li>Side-by-Side Comparison: Compare two different URLs to see how they stack up against each other. This is perfect for benchmarking against competitors or comparing staging vs. production environments.</li> <li>Batch Analysis: Analyze multiple URLs in a single run to get a quick overview of a group of pages.</li> </ul>"},{"location":"features/#smart-recommendations","title":"\ud83d\udca1 Smart Recommendations","text":"<p>Don't just see the problems\u2014solve them. The server includes a recommendation engine that:</p> <ul> <li>Prioritizes Issues: Ranks problems based on their estimated impact on your score.</li> <li>Provides Actionable Fixes: Gives you clear instructions on how to resolve specific issues.</li> <li>Estimates Savings: Shows you how much time or data you could save by implementing the fixes.</li> </ul>"},{"location":"features/#real-world-data-crux","title":"\ud83c\udf0d Real-World Data (CrUX)","text":"<p>Access the Chrome User Experience Report (CrUX) to see how real users are experiencing your site in the wild, complementing the lab data provided by Lighthouse.</p>"},{"location":"features/tools/","title":"Tools Reference","text":"<p>This section details all the tools available in the PageSpeed Insights MCP server. These tools can be called by your MCP client (e.g., Claude).</p>"},{"location":"features/tools/#core-analysis-tools","title":"Core Analysis Tools","text":""},{"location":"features/tools/#analyze_page_speed","title":"<code>analyze_page_speed</code>","text":"<p>Runs a comprehensive Google PageSpeed Insights analysis with Lighthouse metrics.</p> <p>Parameters: *   <code>url</code> (string, required): The URL to analyze. *   <code>strategy</code> (string): \"mobile\" or \"desktop\" (default: \"mobile\"). *   <code>category</code> (array): Categories to analyze (e.g., <code>[\"performance\", \"seo\"]</code>). *   <code>locale</code> (string): Locale for results (default: \"en\").</p>"},{"location":"features/tools/#get_performance_summary","title":"<code>get_performance_summary</code>","text":"<p>Retrieves a simplified report focusing on key performance metrics and opportunities.</p> <p>Parameters: *   <code>url</code> (string, required): The URL to analyze. *   <code>strategy</code> (string): \"mobile\" or \"desktop\".</p>"},{"location":"features/tools/#full_report","title":"<code>full_report</code>","text":"<p>Generates a unified report combining Lighthouse lab data with CrUX field data.</p> <p>Parameters: *   <code>url</code> (string, required): The URL to analyze. *   <code>strategy</code> (string): \"mobile\" or \"desktop\". *   <code>category</code> (array): Categories to include.</p>"},{"location":"features/tools/#get_full_audit","title":"<code>get_full_audit</code>","text":"<p>Runs a complete audit covering all categories: Performance, Accessibility, Best Practices, SEO, and PWA.</p> <p>Parameters: *   <code>url</code> (string, required): The URL to analyze. *   <code>strategy</code> (string): \"mobile\" or \"desktop\".</p>"},{"location":"features/tools/#diagnostic-tools","title":"Diagnostic Tools","text":""},{"location":"features/tools/#get_visual_analysis","title":"<code>get_visual_analysis</code>","text":"<p>Retrieves visual data about the page load.</p> <p>Returns: *   Final screenshot. *   Filmstrip of frames during load. *   Full-page screenshot.</p>"},{"location":"features/tools/#get_element_analysis","title":"<code>get_element_analysis</code>","text":"<p>Identifies specific DOM elements causing performance issues.</p> <p>Returns: *   LCP (Largest Contentful Paint) element. *   CLS (Cumulative Layout Shift) contributors. *   Lazy-loading issues.</p>"},{"location":"features/tools/#get_network_analysis","title":"<code>get_network_analysis</code>","text":"<p>Provides a detailed waterfall of network requests.</p> <p>Returns: *   Request timing and priority. *   Resource size breakdown. *   Server latency metrics.</p>"},{"location":"features/tools/#get_javascript_analysis","title":"<code>get_javascript_analysis</code>","text":"<p>Analyzes JavaScript execution and impact.</p> <p>Returns: *   Bootup time. *   Main thread work breakdown. *   Unused code detection.</p>"},{"location":"features/tools/#get_image_optimization_details","title":"<code>get_image_optimization_details</code>","text":"<p>Identifies image-related performance opportunities.</p> <p>Returns: *   Improperly sized images. *   Offscreen images. *   Format optimization suggestions (WebP/AVIF).</p>"},{"location":"features/tools/#get_render_blocking_details","title":"<code>get_render_blocking_details</code>","text":"<p>Identifies resources that block the first paint of your page.</p> <p>Returns: *   Blocking CSS/JS files. *   Critical request chains.</p>"},{"location":"features/tools/#get_third_party_impact","title":"<code>get_third_party_impact</code>","text":"<p>Analyzes the impact of third-party scripts (ads, analytics, etc.).</p> <p>Returns: *   Impact grouped by entity (e.g., Google, Facebook). *   Blocking time per provider.</p>"},{"location":"features/tools/#comparison-batch-tools","title":"Comparison &amp; Batch Tools","text":""},{"location":"features/tools/#compare_pages","title":"<code>compare_pages</code>","text":"<p>Compares performance metrics between two URLs side-by-side.</p> <p>Parameters: *   <code>urlA</code> (string, required): First URL. *   <code>urlB</code> (string, required): Second URL. *   <code>strategy</code> (string): Analysis strategy.</p>"},{"location":"features/tools/#batch_analyze","title":"<code>batch_analyze</code>","text":"<p>Analyzes multiple URLs in sequence.</p> <p>Parameters: *   <code>urls</code> (array of strings, required): List of URLs (max 10). *   <code>strategy</code> (string): Analysis strategy.</p>"},{"location":"features/tools/#utility-tools","title":"Utility Tools","text":""},{"location":"features/tools/#get_recommendations","title":"<code>get_recommendations</code>","text":"<p>Generates prioritized, actionable recommendations based on analysis results.</p>"},{"location":"features/tools/#crux_summary","title":"<code>crux_summary</code>","text":"<p>Retrieves Chrome User Experience Report (CrUX) data.</p> <p>Parameters: *   <code>url</code> (string, required): The URL to analyze. *   <code>formFactor</code> (string): \"PHONE\", \"DESKTOP\", or \"TABLET\".</p>"},{"location":"features/tools/#clear_cache","title":"<code>clear_cache</code>","text":"<p>Clears the internal cache to force fresh API requests for subsequent calls.</p>"},{"location":"includes/abbreviations/","title":"Abbreviations","text":"<p>[MCP]: Model Context Protocol [API]: Application Programming Interface [JSON]: JavaScript Object Notation [CLI]: Command Line Interface [URL]: Uniform Resource Locator [HTTP]: Hypertext Transfer Protocol [HTTPS]: Hypertext Transfer Protocol Secure [PSI]: PageSpeed Insights</p>"}]}